<style>
    /* 1. NỀN TỐI */
    .utility-overlay {
        position: fixed; top: 0; left: 0; right: 0; bottom: 0;
        background-color: rgba(0, 0, 0, 0.5); z-index: 9998;
        opacity: 0; visibility: hidden; transition: all 0.3s ease;
        backdrop-filter: blur(2px);
    }
    .utility-overlay.show { opacity: 1; visibility: visible; }

    /* 2. MENU TRƯỢT (BOTTOM SHEET) */
    .utility-bottom-sheet {
        position: fixed; bottom: -100%; left: 0; width: 100%;
        background: white; border-radius: 20px 20px 0 0; z-index: 9999;
        padding-bottom: 20px; box-shadow: 0 -5px 25px rgba(0,0,0,0.2);
        transition: bottom 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .utility-bottom-sheet.show { bottom: 0; }

    /* 3. TRANG TRÍ */
    .sheet-handle { width: 40px; height: 4px; background-color: #e0e0e0; border-radius: 2px; margin: 12px auto; }
    .utility-title { text-align: center; font-weight: 700; font-size: 16px; color: #333; padding: 5px 0 15px 0; border-bottom: 1px solid #f0f0f0; }
    .utility-item { display: flex; align-items: center; padding: 16px 24px; text-decoration: none; color: #333; font-size: 16px; font-weight: 500; transition: background 0.2s; }
    .utility-item:active { background-color: #f5f5f5; }
    .utility-item i { font-size: 1.4rem; margin-right: 16px; color: #ff6b6b; width: 25px; text-align: center; }
    .close-sheet-btn { margin: 10px 20px 0; padding: 12px; text-align: center; background: #f1f1f1; border-radius: 12px; color: #666; font-weight: bold; cursor: pointer; }

    /* 4. THANH NAV DƯỚI CÙNG */
    .mobile-bottom-nav {
        position: fixed; bottom: 0; left: 0; width: 100%;
        background: white; box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        display: flex; justify-content: space-around; padding: 10px 0;
        z-index: 9000;
    }
    .nav-item {
        display: flex; flex-direction: column; align-items: center;
        text-decoration: none; color: #888; font-size: 0.75rem; cursor: pointer; position: relative;
    }
    .nav-item i { font-size: 1.4rem; margin-bottom: 4px; }
    .nav-item.active { color: #ff6b6b; font-weight: bold; }
    /* Đảm bảo icon cũng sáng màu khi active */
.nav-item.active i {
    color: #ff6b6b;
}
.nav-item.active i {
    color: #ff6b6b !important;
}
    .cart-badge {
        position: absolute; top: -5px; right: -8px;
        background: red; color: white; font-size: 0.6rem;
        padding: 2px 5px; border-radius: 10px; display: none;
    }
</style>

<div id="utility-overlay" class="utility-overlay" onclick="closeUtilityMenu()"></div>
<div id="utility-menu" class="utility-bottom-sheet">
    <div class="sheet-handle"></div>
    <div class="utility-title">Tiện ích mở rộng</div>
    <a href="order-progress.html" class="utility-item"><i class="bi bi-hourglass-split"></i> <span>Tiến trình đơn hàng</span></a>
    <a href="order-history.html" class="utility-item"><i class="bi bi-clock-history"></i> <span>Lịch sử đặt món</span></a>
    <div class="close-sheet-btn" onclick="closeUtilityMenu()">Đóng</div>
</div>

<div class="mobile-bottom-nav">
    <a href="index.html" class="nav-item" id="nav-home"><i class="bi bi-house-door-fill"></i> <span>Trang chủ</span></a>
    <a href="order.html" class="nav-item" id="nav-cart">
        <div style="position: relative;">
            <i class="bi bi-basket2-fill"></i>
            <span id="mobile-cart-count" class="cart-badge">0</span>
        </div>
        <span>Giỏ hàng</span>
    </a>
    <div class="nav-item" id="nav-utility" onclick="toggleUtilityMenu()"><i class="bi bi-grid-fill"></i> <span>Tiện ích</span></div>
    <a href="profile.html" class="nav-item" id="nav-profile"><i class="bi bi-person-fill"></i> <span>Tài khoản</span></a>
</div>