<header>
    <div class="logo">ğŸœ Quáº£n lÃ½ quÃ¡n Äƒn</div>
    
    <nav class="nav-links">
        <a href="index.html">Trang chá»§</a>
        <a href="admin.html" id="nav-admin-link">Quáº£n lÃ½ Ä‘Æ¡n</a>
        <a href="admin-ban.html" id="nav-table-link">Quáº£n lÃ½ bÃ n</a>
        <a href="/admin-dashboard.html" id="nav-stats-link">Thá»‘ng kÃª</a>
        <div class="dropdown" id="utilityDropdown">
            <button class="dropbtn">Tiá»‡n Ã­ch</button>
            <div class="dropdown-content">
                <a href="profile.html">ğŸ‘¤ ThÃ´ng tin</a>
                <a href="/admin-zalopay-history.html">ğŸ“œ Lá»‹ch sá»­ chuyá»ƒn khoáº£n</a>
                <a href="/quan-ly-mon-an.html">ğŸ´ Quáº£n lÃ½ mÃ³n Äƒn</a>
            </div>
        </div>
    </nav>

    <div class="header-actions" id="headerAuthBlock" style="display: none;">
        <button class="btn" id="authButton" style="width: auto; padding: 8px 16px;">ÄÄƒng nháº­p</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Láº¥y thÃ´ng tin user tá»« LocalStorage
            const userInfo = JSON.parse(localStorage.getItem("userInfo"));
            
            // Láº¥y cÃ¡c pháº§n tá»­ cáº§n thao tÃ¡c
            const authBlock = document.getElementById('headerAuthBlock');
            const authBtn = document.getElementById('authButton');

            // === 1. LOGIC áº¨N/HIá»†N NÃšT ÄÄ‚NG NHáº¬P ===
            if (userInfo) {
                // TRÆ¯á»œNG Há»¢P A: ÄÃƒ ÄÄ‚NG NHáº¬P (Admin hoáº·c User)
                // => Tuyá»‡t Ä‘á»‘i KHÃ”NG hiá»ƒn thá»‹ nÃºt nÃ y (VÃ¬ Ä‘Ã£ cÃ³ trong Profile)
                if(authBlock) authBlock.style.setProperty('display', 'none', 'important');
            } 
            else {
                // TRÆ¯á»œNG Há»¢P B: KHÃCH VÃƒNG LAI (ChÆ°a Ä‘Äƒng nháº­p)
                // => Báº¯t buá»™c HIá»†N nÃºt Ä‘á»ƒ ngÆ°á»i ta báº¥m
                if(authBlock) authBlock.style.display = 'flex';
                
                if(authBtn) {
                    authBtn.textContent = 'ÄÄƒng nháº­p';
                    authBtn.onclick = function() {
                        window.location.href = '/login.html'; // Chuyá»ƒn trang login
                    };
                }
            }

            // === 2. LOGIC áº¨N MENU ADMIN (Náº¿u khÃ´ng pháº£i Admin) ===
            if (!userInfo || userInfo.role !== 'admin') {
                const adminIds = ['nav-admin-link', 'nav-table-link', 'nav-stats-link'];
                adminIds.forEach(id => {
                    const el = document.getElementById(id);
                    if(el) el.style.display = 'none';
                });
            }
        });
    </script>
</header>