<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω M√≥n ƒÇn</title>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            /* T√¥ng m√†u CAM ch·ªß ƒë·∫°o */
            --primary: #f97316;       /* Cam t∆∞∆°i */
            --primary-hover: #ea580c; /* Cam ƒë·∫≠m */
            --primary-light: #fff7ed; /* Cam r·∫•t nh·∫°t (n·ªÅn) */
            --bg-body: #f3f4f6;       /* X√°m nh·∫°t */
            --white: #ffffff;
            --text-main: #1f2937;
            --text-light: #6b7280;
            --border: #e5e7eb;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --radius: 12px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Be Vietnam Pro', sans-serif; }
        
        body { background-color: var(--bg-body); color: var(--text-main); padding-bottom: 40px; }

        /* --- HEADER --- */
        .top-bar {
            background: var(--white);
            padding: 15px 30px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            display: flex; align-items: center; justify-content: space-between;
            position: sticky; top: 0; z-index: 100;
        }

        .brand { font-size: 1.25rem; font-weight: 700; color: var(--primary); display: flex; align-items: center; gap: 10px; }
        
        .btn-back {
            text-decoration: none; color: var(--text-light); font-weight: 500; font-size: 0.95rem;
            padding: 8px 16px; border-radius: 8px; transition: 0.2s; background: transparent; border: 1px solid var(--border);
        }
        .btn-back:hover { background: var(--white); color: var(--primary); border-color: var(--primary); }

        /* --- LAYOUT CH√çNH --- */
        .main-container {
            max-width: 1400px; margin: 30px auto; padding: 0 20px;
            display: grid; grid-template-columns: 360px 1fr; gap: 25px; align-items: start;
        }

        /* CARD CHUNG */
        .card {
            background: var(--white); border-radius: var(--radius); box-shadow: var(--shadow);
            overflow: hidden; border: 1px solid var(--border);
        }
        .card-header { padding: 20px; border-bottom: 1px solid var(--border); background: #fffcf9; }
        .card-title { font-size: 1.1rem; font-weight: 700; color: var(--text-main); margin: 0; }
        .card-body { padding: 20px; }

        /* --- FORM (B√äN TR√ÅI) --- */
        .form-group { margin-bottom: 15px; }
        .form-label { display: block; margin-bottom: 6px; font-weight: 600; font-size: 0.9rem; color: #374151; }
        
        .form-input {
            width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px;
            font-size: 0.95rem; transition: 0.2s; background: #f9fafb; outline: none;
        }
        .form-input:focus {
            background: var(--white); border-color: var(--primary);
            box-shadow: 0 0 0 4px var(--primary-light);
        }

        /* N√∫t Submit */
        .btn-submit {
            width: 100%; padding: 12px; border: none; border-radius: 8px;
            background: linear-gradient(135deg, var(--primary), #fb923c);
            color: white; font-weight: 600; font-size: 1rem; cursor: pointer;
            transition: all 0.2s; margin-top: 10px;
        }
        .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3); }

        .btn-cancel {
            width: 100%; padding: 12px; border: none; border-radius: 8px;
            background: #e5e7eb; color: var(--text-main); font-weight: 600;
            cursor: pointer; margin-top: 10px; display: none; /* JS s·∫Ω b·∫≠t n√≥ l√™n */
        }

        /* --- TABLE (B√äN PH·∫¢I) --- */
        .table-responsive { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; min-width: 650px; }
        
        thead { background: var(--primary-light); }
        th {
            text-align: left; padding: 16px; font-size: 0.8rem; text-transform: uppercase;
            font-weight: 700; color: var(--primary); letter-spacing: 0.5px;
        }
        td { padding: 16px; border-bottom: 1px solid var(--border); vertical-align: middle; font-size: 0.95rem; }
        tr:hover td { background: #fafafa; }

        /* Style cho ·∫¢nh v√† N√∫t do JS t·∫°o ra */
        .mon-img-style {
            width: 60px; height: 60px; object-fit: cover; border-radius: 10px;
            border: 1px solid var(--border); box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .action-group { display: flex; gap: 8px; }
        
    .btn-action i {
        pointer-events: none; /* Gi√∫p click xuy√™n qua icon */
        font-size: 1rem;      /* Ch·ªânh icon to r√µ h∆°n */
    }
    /* =============================== */

    .btn-edit-style { background: #dbeafe; color: #2563eb; }
    .btn-edit-style:hover { background: #2563eb; color: white; transform: scale(1.1); }
    
    .btn-delete-style { background: #fee2e2; color: #dc2626; }
    .btn-delete-style:hover { background: #dc2626; color: white; transform: scale(1.1); }
        /* Responsive Mobile */
        @media (max-width: 900px) {
            .main-container { grid-template-columns: 1fr; }
            .top-bar { flex-direction: column; gap: 10px; align-items: flex-start; }
            .btn-back { width: 100%; text-align: center; }
        }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="brand">
            <i class="fa-solid fa-utensils"></i> QU·∫¢N L√ù TH·ª∞C ƒê∆†N
        </div>
        <a href="admin.html" class="btn-back">
            <i class="fa-solid fa-arrow-left"></i> Tr·ªü v·ªÅ Dashboard
        </a>
    </div>

    <div class="main-container">
        
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Th√¥ng tin m√≥n ƒÉn</h3>
            </div>
            <div class="card-body">
                <form id="add-mon-an-form">
                    <input type="hidden" id="mon-id">
                    
                    <div class="form-group">
                        <label class="form-label">T√™n m√≥n ƒÉn</label>
                        <input type="text" id="mon-name" class="form-input" placeholder="V√≠ d·ª•: B√∫n B√≤ Hu·∫ø" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Gi√° b√°n (VNƒê)</label>
                        <input type="number" id="mon-price" class="form-input" placeholder="V√≠ d·ª•: 35000" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Link h√¨nh ·∫£nh</label>
                        <input type="text" id="mon-image" class="form-input" placeholder="https://..." required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Danh m·ª•c</label>
                        <select id="mon-category" class="form-input" required>
                            <option value="" disabled selected>-- Ch·ªçn lo·∫°i m√≥n --</option>
                            <option value="flash-sale" style="color: #ea580c; font-weight: bold;">‚ö° Flash Sale</option>
                            <option value="M√≥n n∆∞·ªõc">üçú M√≥n n∆∞·ªõc</option>
                            <option value="M√≥n kh√¥">üçõ M√≥n kh√¥</option>
                            <option value="N∆∞·ªõc u·ªëng">ü•§ N∆∞·ªõc u·ªëng</option>
                            <option value="Kh√°c">üçΩÔ∏è Kh√°c</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="btn-submit" id="save-btn">
                        <i class="fa-solid fa-plus"></i> L∆∞u m√≥n ƒÉn
                    </button>
                    <button type="button" class="btn-cancel" id="cancel-edit-btn">H·ªßy b·ªè</button>
                </form>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Danh s√°ch th·ª±c ƒë∆°n</h3>
            </div>
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th width="80">·∫¢nh</th>
                            <th>T√™n m√≥n</th>
                            <th>Gi√° b√°n</th>
                            <th>Lo·∫°i</th>
                            <th width="100">Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="mon-an-list-container">
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="js/quan-ly-mon-an.js"></script>

    <script>
        // ƒêo·∫°n script n√†y t·ª± ƒë·ªông ph√°t hi·ªán khi JS g·ªëc th√™m d√≤ng m·ªõi v√†o b·∫£ng
        // v√† l·∫≠p t·ª©c "trang ƒëi·ªÉm" cho c√°c n√∫t b·∫•m v√† h√¨nh ·∫£nh ƒë·∫πp h∆°n.
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    enhanceUI();
                }
            });
        });

        const listContainer = document.getElementById('mon-an-list-container');
        if (listContainer) {
            observer.observe(listContainer, { childList: true });
        }

        function enhanceUI() {
            const rows = document.querySelectorAll('#mon-an-list-container tr');
            rows.forEach(row => {
                // 1. L√†m ƒë·∫πp ·∫¢nh
                const img = row.querySelector('img');
                if (img && !img.classList.contains('mon-img-style')) {
                    img.classList.add('mon-img-style');
                }

                // 2. L√†m ƒë·∫πp n√∫t S·ª≠a
                // T√¨m n√∫t ƒë·∫ßu ti√™n trong c·ªôt H√†nh ƒë·ªông (th∆∞·ªùng l√† S·ª≠a)
                const actionCell = row.cells[row.cells.length - 1];
                if(actionCell) {
                    const buttons = actionCell.querySelectorAll('button');
                    
                    // Gi·∫£ s·ª≠ n√∫t ƒë·∫ßu ti√™n l√† S·ª≠a, n√∫t th·ª© 2 l√† X√≥a
                    if (buttons.length >= 1) {
                        const editBtn = buttons[0];
                        editBtn.classList.add('btn-action', 'btn-edit-style');
                        if(!editBtn.innerHTML.includes('fa-')) editBtn.innerHTML = '<i class="fa-solid fa-pen"></i>';
                    }
                    
                    if (buttons.length >= 2) {
                        const deleteBtn = buttons[1]; // Ho·∫∑c class .delete-btn
                        deleteBtn.classList.add('btn-action', 'btn-delete-style');
                        if(!deleteBtn.innerHTML.includes('fa-')) deleteBtn.innerHTML = '<i class="fa-solid fa-trash"></i>';
                    }

                    // Gom nh√≥m n√∫t n·∫øu ch∆∞a gom
                    if (!actionCell.querySelector('.action-group')) {
                        const div = document.createElement('div');
                        div.className = 'action-group';
                        while (actionCell.firstChild) {
                            div.appendChild(actionCell.firstChild);
                        }
                        actionCell.appendChild(div);
                    }
                }
            });
        }
    </script>
</body>
</html>